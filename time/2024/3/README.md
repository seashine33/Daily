## 第一周
### 周五： 2024.3.1，预答辩剩余23天
- 计划
  - 上午1000字。开始13854字，收尾14077字。把车辆风险场图画好了。
  - 下午，收15075字。
    - 1、把风险场图的描述写好。
    - 2、风险指标与碰撞概念的定义。

## 第二周
### 周一： 2024.3.4，预答辩剩余20天
- 计划
  - 3.3 碰撞风险评估模型完成。
- 过程
  - 我想明白了风险场分布的问题
    - 首先我自己的想法，那就是同向前车对于自车的风险场，重点在车尾，这是没问题的。
    - 然后除了跟车还有会车。例如他车从西向东以较高速度通过路口，而本车起步通过绿灯，这种情况下，他车的重点风险区域就是车辆前方。
    - 所以，车辆风险场不能简单的基于他车状态定义，而应该根据自车方位定义。
    - 晚上又跟yxh讨论了一下，我想我大概明白我原先想法的问题所在了，如果重点风险区域在车尾，那么本车处于跟车场景下，来自前车的风险会一直偏高，而且速度越快越高，这其实是不正常的，这样根本分不清什么时候是高风险时刻。真正风险高的时刻应该是前车急刹车，对应风险场会将重点风险区域转移到后方。
    - 话说回来，那如果自车身后有辆车，那岂不是自车一直处于高风险状态？实际上这明显不合理。实际开车过程中，是很少在意后车的状态的。【这确实是漏洞】
      - 风险场与实际的风险指标还是有差别，
    - 为什么匀速要中心靠前呢，车前10米和车后10米的风险肯定不同。
### 周二： 2024.3.5，预答辩剩余19天
- 计划
  - 3.3 碰撞风险评估模型完成。
- 过程
  - 把psq的风险场力部分看了，关键是自己跑了下代码，发现全是我自己的问题，所有的场景都是满足的，我之前纠结的错误其实是我只关注于车辆风险场。
  - 车辆风险场的定义，应该是他车对对应位置下的物体所产生的**压力**。
    - 如果车辆是静止不动的，那么对四周风险分布一致。
    - 如果车辆向前匀速行驶，那么该车车头10米距离物体的碰撞压力要大于车尾10米处物体。所以车辆风险场在匀速状态下的**碰撞重心**
    - 如果车辆加速度不为零，那么车辆的碰撞重心会往加速度方向偏移。
    - 如果车辆的转向角不为零，那么整个风险场会以局部坐标系为中心，往转向角方向进行偏移。
  - 最后一个疑惑：那就是车前方势场掉的速度快，车尾势场掉的快。
  - 最最后一个：碰撞风险指标如何使用？
    - 1、作为轨迹规划的评分依据（MPC）
    - 2、设定碰撞指标，

### 周三： 2024.3.6，预答辩剩余18天
- 计划
  - 3.3 邻接碰撞状态计算完成
- 过程
  - 四个变量，车长l，车宽d，两车位置θ，两车速度方向φ。
    - l/d >= 2.414
    - | φ\θ  | θ=0 | 0<θ<arctan(d/l) | θ=arctan(d/l) | arctan(d/l)<θ<90 |
      | --- | --- | --------------- | ------------- | ---------------- |
      | φ = 0 | l |
      | 0<φ<arctan(d/l) |
      | φ=arctan(d/l) |
      | arctan(d/l)<φ<90-arctan(d/l) |
      | φ = 90-arctan(d/l) |
      | 90-arctan(d/l)<φ<90 |
      | φ=90 |
    - l/d < 2.414

### 周六： 2024.3.9，预答辩剩余15天
- 计划
  - 将3.3节写完
- 过程
  - 将3.3节的内容重新梳理一下
    - 3.2节中介绍了几种来源的风险场，这一节的内容主要介绍风险场的使用，来确保系统能够有效预警。
    - 碰撞风险指标：风险场力，最大，
    - 碰撞概率
  - 基于风险场的碰撞概率画出来了
    - 效果还可以，我想表达出的概念完全表达出来了。
    - 其讨论的碰撞是360度的碰撞，也就是可以监测到碰撞来源。
    - 但，没办法表达出风险车在我前面，我风险大；我后面跟着两车，我不在意；左右有车也有一定的在意。
    - 效果就是将风险区域划分为一个个四四方方的同心矩形。 
  - 现在碰见了很大的问题
    - 我没办法把碰撞概率嵌入到我论文里面。
    - 碰撞是瞬时下的状态，讨论瞬时下状态，速度加速度等就无用，这些应该在轨迹预测里考虑，
    - 有用的只有两车相对位置、航向、转向角这些影响碰撞的状态。
    - 也就是，碰撞区域是不随车辆的状态的改变而改变的，别想通过修改车辆状态而修改碰撞区域。
    - 能随车辆状态改变而改变的是警示区域。

### 周天： 2024.3.10，预答辩剩余14天
- 总结
  - 基于**势场**的风险评估，有利于量化风险，接着做轨迹规划。
    - 需要考虑的状态：相对位置(θ,L)，相对航向角(φ)，速度(v1,v2)，加速度(a1)
  - 基于**距离**的风险评估，有利于基于距离来做碰撞评估。
    - 需要考虑的状态：相对位置(θ,L)，相对航向角(φ)
  - 势场+距离。
    - psq论文使用自车状态的方法：
      - 风险场力：风险场乘自车状态方程。得到两车之间风险的量化值。
    - 基于距离使用自车状态
      - 基于两车方位(θ,L)，本车航向，确定临界碰撞距离(L*)
      - 这种方法不考虑车辆的动态状态，就当物体都为静止物体，这样不好
      - 虽然我考虑的是当前瞬时，三秒后的瞬时，但我还是希望能体现出态势出来。
      - 例如：虽然我和前车的距离挺近的，但前车的速度或者加速度非常大，这时候就应该体现出来。
        - 提出质疑，这是当前还是预测的未来呢
        - 当前的话，应该就是碰撞本身？
        - 未来的话，【暂时搁置】
      - 首先，**碰撞环**本身是不应该修改的。
        - 基于两车的瞬时**相对位置**确定碰撞环
      - 其次，应该修改的是**概率环**。
        - 基于两车的瞬时**相对状态**确定概率环
        - 一圈圈概率环，随着风险来源车的状态的变化而发生变化。
## 第三周
### 周一： 2024.3.11，预答辩剩余10天
- 计划
  - [ ] 3.2节 基于碰撞距离的风险场模型
    - [x] 3.2.1 车辆之间的临界碰撞距离
    - [ ] 3.2.2 车辆边界的临界碰撞距离
  - [ ] 3.3节 基于碰撞距离的风险场模型
- 过程
  - 问题1：两车速度夹角90°，碰撞环确定，风险场重点区域很奇怪
    - 想风险来源车两边扩散，而不是前。
### 周二：2024.3.12，预答辩剩余8天
- 计划
- 过程
  - 场景5中，如果车身在Y的正方向上，那么应该比对应负方向要差，总体风险区域应该在右下方。
  - 场景6中，总体风险场应该在正右方。
- 总结
  - 写到一点半，结果3.3.1节还是没有写完，还剩场景描述，不太想写了。
  - [x] 还剩七天到20号，我必须得在一天内把实验代码写好。
  - [x] 明天的任务就是3.3节写完，最好上午弄完。
  - [x] 下午把实验部分的代码调好。
  - [ ] 有空的话把3.1节给再写一遍。

### 周三： 2024.3.13，预答辩剩余7天
- 过程
  - 上午：把3.3.1写完了
  - 下午：把算法流程图画了
  - 晚上：把实验代码调好了
- 总结
  - 很是勤勉的一天

### 周四：2024.3.14，预答辩剩余7天
- 计划
  - 将第三章写完。
    - [ ] 3.1 问题分析
    - [x] 3.2.1 碰撞距离
    - [x] 3.2.2 碰撞概率
    - [x] 3.3.1 碰撞风险场
    - [x] 3.3.2 碰撞评估算法
    - [ ] 3.4.1 实验场景设计
    - [ ] 3.4.2 实验过程与结果分析
    - [ ] 3.5 本章小结
- 过程
  - 晚上大概一点四十睡觉，早上九点起来，把衣服洗了，
  - 到实验室就已经九点四十多，洗好了还得回去晾一下。
  - 把3.2.2 碰撞距离改了一下，将系数挪到P里面来了。并对文字进行修改
  - 10:42，上个厕所，回寝室收衣服
  - 11:12，回到实验室。
  - woc，我没发现60m/s，时216km/h，谁家好人开车这么离谱啊。
  - 20m/s的话大概就是72km/h，这还正常一点。

## 第四周
### 周一：2024.3.18，预答辩剩余3天
- 剩余
  - [x] **中文摘要**
  - [ ] **英文摘要**
  - [ ] 1.1 研究背景及意义
  - [ ] 1.2 国内外研究现状
  - [x] 2.1.1 图神经网络
  - [x] 2.1.2 图注意力机制
  - [ ] 2.4.3 实验环境与超参数设置
  - [ ] 2.4.4 **对比实验**
  - [x] 3.2.1 **碰撞距离公式**
  - [ ] 3.4.1 实验场景设计
  - [ ] 3.4.2 **实验过程与分析**
  - [ ] 4 **总结与展望**
  - [ ] **致谢**
  - [ ] 参考文献

### 周二：2024.3.19，预答辩剩余2天
- 剩余
  - [x] **中文摘要**
  - [ ] **英文摘要**
  - [ ] 1.1 研究背景及意义
  - [ ] 1.2 国内外研究现状
  - [x] 1.3.2 技术路线
  - [x] 2.4.3 实验环境
  - [x] 2.4.4 **对比实验**
  - [ ] 3.4.1 实验场景设计
  - [ ] 3.4.2 **实验过程与分析**
  - [x] 4 **总结与展望**
  - [ ] **致谢**
  - [ ] 参考文献
- 过程
  - 一上午才写个摘要第一段。

### 周三：2024.3.20，预答辩剩余2天
- 打印六份
- 附件一：


为后续的预警策略提供支持


- [x] 摘要：写高精地图
- [x] 摘要：强调轨迹预测【将第三章题目改了，不用强调了】
- [x] 研究背景及意义：没有写碰撞风险评估
- [ ] 第三章问题分析：把问题提出来。
  - 碰撞检测方法
  - 经典碰撞风险评估方法缺陷
  - 轨迹预测
- [ ] 第三章结构，没有凸显出轨迹预测的部分【将第三章题目改了，现在需要体现出来就行】
  - [x] 临界碰撞距离的定义理清楚
  - 2、
- [x] 划分了不同的安全等级【想着怎么圆】
- [x] 粗糙轨迹 -> 一阶段预测轨迹
- [ ] 对比实验中加入排行榜排名
- [ ] 致谢

### 周天：2024.3.24
- 论文待完成
  - 1、研究背景中添加地图
  - 2、国内外研究现状
  - 3、技术路线中：“量化”，“交叉注意力”
  - 4、对比实验中加入网站，排名结果
  - 5、第二章图全部竖写
  - 6、图表跨页的问题，标题跨页问题。
  - 7、14页问题描述没有把问题提出来。第一段应该写进研究现状当中。
  - 8、2.4节“相关实验”标题表述不好。

## 第五周
### 周一：2024.3.25
- 论文待完成
  - [x] 1、研究背景中添加地图
  - [ ] 2、国内外研究现状
  - [x] 3、技术路线中：“量化”，“交叉注意力”
  - [x] 4、对比实验中加入网站，排名结果
  - [ ] 5、第二章图全部竖写
  - [x] 6、图表跨页的问题，标题跨页问题。
  - [x] 7、14页问题描述没有把问题提出来。第一段应该写进研究现状当中。
  - [x] 8、2.4节“相关实验”标题表述不好。
- 饥荒
  - 第一次打过了帝王蟹，回档了不下十次吧，其实算是好打的，就是要掌握节奏，由于它会回血所以要快速输出。
  - 然后所有的月岛祭坛也都找好了。


### 周二：2024.3.26
- 论文
  - [A survey on motion prediction and risk assessment for intelligent vehicles](https://robomechjournal.springeropen.com/articles/10.1186/s40648-014-0001-z)
    - 2014年的论文
  - [Trajectory-Prediction with Vision： A Survey](https://openaccess.thecvf.com/content/ICCV2023W/VCL/papers/Singh_Trajectory-Prediction_with_Vision_A_Survey_ICCVW_2023_paper.pdf)
    - 2023年的
  - [Multimodal Trajectory Prediction： A Survey](https://arxiv.org/pdf/2302.10463.pdf)
    - 2023年的
    - 讲多模态的, 
  - [A Survey on Deep-Learning Approaches for Vehicle Trajectory Prediction in Autonomous Driving](https://ieeexplore.ieee.org/abstract/document/9739407)
    - 2021年的
    - 好像是TNT的作者写的
  - [Machine learning for autonomous vehicle's trajectory prediction: A comprehensive survey, challenges, and future research directions](https://doi.org/10.1016/j.vehcom.2024.100733)
    - https://zhuanlan.zhihu.com/p/667496996
    - 2024年的
  - [A Survey on Trajectory-Prediction Methods for Autonomous Driving](https://ieeexplore.ieee.org/abstract/document/9756903)
    - https://zhuanlan.zhihu.com/p/671320862
    - 2022年


### 周三：2024.3.27
- 提炼一下第三章的核心
  - 首先是提出了哪些东西
    - 1、临界碰撞距离：瞬时状态下，
    - 2、基于预测的碰撞概率：预测瞬时
    - 3、基于概率量化的碰撞风险场
      - 每辆车的碰撞风险。推翻，势场本身就不应该是一个概率值！！我要求的就是风险概率！
    - 4、碰撞风险指标，安全等级：
      - 其实我没有考虑多车情况下的风险的计算。
  - 参考psq的结构
    - 1、基于概率量化的碰撞风险评估方法
      - 临界碰撞距离L
      - 碰撞概率P
      - 碰撞风险指数(Collision risk index, CRI)
  - 你第二章结果是预测三十个点，最后你就用最后一个？
    - 应该起码三个点。
    - 怎么平衡多个概率呢？
  - 多个变量
    - 多辆车：A，可以选取距离最近的车
    - 每辆车多条预测轨迹：K，可以选取评分最高的轨迹
    - 每条预测轨迹多个预测瞬时：F，可以选取时间最远的瞬时
  - 碰撞风险指标应该是一个综合值，应该综合考虑周边所有车辆。
  - TTC只适用于跟车场景。

### 周四：2024.3.28
- 想着在十点开始写论文，玩玩WiFi模块的，结果调了一上午。
- 第三章逻辑
  - 1、临界碰撞距离与基于预测的碰撞概率都没有逻辑上的问题。
  - 2、但碰撞风险指标的构建存在一定的困难。
    - 首先就是DRI的组成
      - 方案一：基于预测P，结合预测车辆状态计算。
      - 方案二：基于当前P，结合当前车辆状态计算。
      - 方案三：结合方案以与方案二。
      - 我感性上觉得应该基于当前状态计算。那我应该分析出预测的漏洞。
        - 加入速度等后，会让预测的状态保持安全距离。
        - 当前车急刹车后，会自然行驶0.1秒，然后轨迹预测结果突变。接着导致碰撞概率突变。
        - 就会预警，刹车，然后避免碰撞。
        - 只要预测状态有安全距离能让当前状态也有安全距离，理论上来说目的就达到了。

### 周五：2024.3.29
- 结合地图信息与车辆历史轨迹预测未来轨迹。本文研究通过对高精地图的几何和语义信息进行高效的矢量化编码，将地图中的信息最大化的传递到预测模型中，同时对车辆轨迹的每一瞬时节点进行编码，以捕获其时间序列特性，进而提高轨迹预测的准确性和可靠性。随后，使用多种图注意力网络将各类节点特征进行直接交互，生成包含临近的空间和时间特征的瞬时步特征。通常多模态的轨迹预测模型同时预测多条可能的轨迹，轨迹预测是一次性完成的，难以保证轨迹预测的精度，本文提出的轨迹预测方法将解码步骤一分为二，首先采用长窗口预测模块生成初步预测轨迹，随后优化模块通过缩短预测时长，对初步预测轨迹进行细致的优化处理。
- 针对传统碰撞风险评估方法安全阈值难以确定及考虑因素单一的问题，本文提出了一种基于概率量化的碰撞风险评估方法。首先，为了平衡碰撞判定的准确性与计算复杂性，本方法将车辆模型简化为矩形，提出了一种综合考虑车辆间方位角和横摆角的临界碰撞距离计算公式。其次，为了给驾驶员或自动驾驶汽车预留充足的反应时间，本方法基于VaLW模型预测的结果，通过两车距离与对应临界碰撞距离的接近程度，来估算自车与周边车辆发生碰撞的概率。随后，基于两车间的速度差，他车速度及加速度构建碰撞风险指数。最后，通过实验表明，本文提出的方法相较于传统的TTC方法更能体现出车辆在行驶过程中的风险。

- 摘要
  - 
- 研究背景及意义
  - 
- 研究内容
  - 换角度写，摘要，
- 本章小结
- 总结

尽量不留白，文字格式

两端对齐

高精地图的数据表达方法是什么？

不要用以往

### 周六：2024.3.30
- 今天的任务是把第一章改好
  - [x] 摘要
  - [x] 研究背景及意义
  - [ ] 国内外研究现状
  - [ ] 研究内容与技术路线
    - 1、碰撞判定方法
    - 2、安全预知难以确定
  - [ ] 论文章节安排

- 第一类建议的基于物理的预测模型使用经典力学的运动方程作为目标物体未来运动建模的基础。可以使用动力学或运动学模型来描述物理行为。**动力学模型**考虑了引起运动的横向和纵向轮胎力，但通常选择基本动力学模型来平衡预测精度和计算工作量。
- 相比之下，**运动学模型**由于其简单的形式而更常用。卡尔曼滤波（KF）技术可以处理车辆当前条件下的干扰，如不确定性或噪声。例如，张等人[222]提出了一种基于车对车通信和KF的方法，使宿主车辆能够预测远程车辆的轨迹并避开障碍物。Lefkopoulos等人[113]还介绍了交互多模型卡尔曼滤波器（IMM-KF），这是一种新技术，它结合了交互相关参数，使用基于物理的模型在几秒钟内进行更准确的轨迹预测。
- 蒙特卡罗方法可以用于通过将物理模型随机应用于输入变量样本来粗略模拟状态分布，从而生成潜在的未来轨迹。该方法可用于从由过滤机制评估的完全已知或未知状态预测交通参与者轨迹。Okamoto等人[144]在基于机动的模型中使用蒙特卡罗方法，根据识别的机动来预测未来的轨迹。类似地，Wang等人[187]使用蒙特卡罗方法来预测轨迹，然后使用模型预测控制（MPC）来细化参考轨迹。
- 总之，基于物理的模型具有良好的可解释性、鲁棒性和高精度，特别是对于短期预测任务。这些模型非常适合安全评估目的，通常侧重于在不超过1秒的时间范围内进行预测。然而，它们在捕捉复杂机动方面可能存在局限性，通常依赖于简化的假设和在未知或动态环境中的有限适应性。表3简要概述了这些模型，包括设计和实现参数，如输入特征、模型架构、案例研究、评估指标、预测范围（秒）和数据集详细信息。

- Comparison and Evaluation of Advanced Motion Models for Vehicle Tracking
- RNN
  - 循环神经网络（RNN）被设计用于处理时间信息，而传统的机器学习方法和卷积神经网络（CNNs）擅长处理空间信息[68]，[173]。它维护过去时间步长数据的记录，并将输入状态和隐藏状态结合起来以生成所需的输出。然而，当处理大量的时间步长时，RNN的梯度可能会减弱或爆炸，从而引发问题。为了解决这个问题，已经开发了门控RNN，如长短期记忆网络（LSTM）和门控递归单元（GRU）。基于RNN的轨迹预测模型被分类为单个RNN模型或多个RNN模型。
  - 1）单RNN：为了基于机动或单模态轨迹预测来预测轨迹，使用单RNN模型。此外，它还可以被纳入辅助模型中，以促进更复杂的功能，例如感知交互的预测。在各种研究[238,240,149]中，LSTM已被用作车辆操纵预测的序列分类器。在这些研究中，LSTM细胞提取车辆属性，输出层使用最终细胞的隐藏状态预测运动。在[238,240]中，使用全连接层来提取特征并将其输入到三层LSTM中，而在[149]中使用了两个没有嵌入的LSTM层。Altché等人[8]使用单层LSTM来估计目标车辆的轨迹。丁等人[49]使用LSTM编码器通过对目标车辆的状态进行编码来预测其机动。将结合社会和地理信息的LSTM编码器-解码器与[27]中的最近邻（NN）回归方法进行了比较。在[239]中，Zyner等人使用加权高斯混合模型（GMM）来预测多模态轨迹。使用编码器-解码器三层LSTM模型获得GMM的参数，并使用具有最高概率的模态对预测轨迹进行聚类。Xing等人[206]使用GMM来识别驾驶风格，LSTM和全连接回归层来评估序列数据和驾驶风格，以预测车辆轨迹，车队中的第一辆车遵循其预测轨迹。Kawasaki等人[102]在考虑车道信息的同时，将LSTM和KF集成用于多模态轨迹预测。
  - 2）多RNN：神经网络的发展导致了各种类型的RNN架构的广泛使用。在Xin等人[205]中，使用两个独立的LSTM来基于车辆的当前状态和预期车道来预测车辆的目标车道和轨迹。Deo等人[44]提出了六个LSTM解码器，每个解码器连接到不同的操作，以预测多模态轨迹。戴等人[40]利用两组LSTM网络来模拟附近车辆的运动和相互作用。Ding等人[48]提出了一组GRU编码器来表征车辆之间的配对交互。Min等人[136]使用多个RNN和全连接层来生成描述目标车辆未来轨迹的三次多项式系数。唐等人[174]采用注意力机制来创建由多个RNN组成的动态编码器，该RNN共享参数以预测多模态轨迹。在[133]中，使用LSTM编码器-解码器和多头注意力层生成多模态轨迹。张等人在[224]中提出了一种具有多个LSTM的范式，用于轨迹和意图预测。徐等人[203]介绍了一种用于轨迹预测的师生网络，其中学生算法基于LSTM编码器-解码器模型，教师算法基于卷积图网络。尽管RNN被广泛用于分析和预测数据序列，如轨迹预测，但它们在模拟空间关系（如车辆交互）和处理图像数据（如驾驶场景的上下文）方面存在局限性。这就是为什么复杂的基于RNN的解决方案通常需要多种技术来克服单个RNN的局限性。总之，RNN通过有效地建模时间相关性，为轨迹预测提供了一种强大的方法。它们可以处理可变长度的序列并提供可解释性。然而，它们可能会受到梯度消失或爆炸以及顺序计算限制的影响。在将RNN应用于轨迹预测任务时，了解这些因素至关重要。表6总结了基于RNN的轨迹预测方法，提供了以秒为单位的预测地平线（PH）和预测轨迹数量的信息。该表还包括用于培训和测试的评估指标，并强调了每项研究的优势和劣势。此外，表7检查了输入模态及其观察到的历史长度（秒），比较了模型中的编码和解码技术。它对比了在模型训练过程中使用不同损失函数、优化方法和激活函数/学习率的方法，还考虑了这些模型的实现平台。此外，它还列举了每种方法的训练、验证和测试数据集中的样本数量。
- CNN
  - 卷积神经网络已成功应用于各种计算机视觉任务，包括轨迹预测。尽管卷积神经网络主要是为图像数据设计的，但通过将轨迹序列视为结构化网格状输入，它们可以适用于轨迹预测。最近，CNN在各种任务中都取得了成功，包括机器翻译[60]和计算机视觉[19]。在自动驾驶汽车轨迹预测的背景下，CNN通常用于基于视觉的预测，其中从正面摄像头捕获的图像中提取特征。Nikhil等人[143]发现，使用CNN进行轨迹预测优于RNN，因为轨迹具有显著的时空连续性。他们将卷积层堆叠在完全连接层之后，以创建时间连续性，并使用完全连接层输出未来轨迹，将过去的轨迹作为输入。根据实验，这种基于CNN的网络运行速度更快。
  - 然而，大多数使用CNN框架的技术都以鸟瞰图（BEV）作为输入，显示自上而下的交通状况视图。BEV图像可以使用多个数据源创建，包括激光雷达点云、占用网格（OG）和高清地图（HD地图）。最近的一些研究利用CNN从复杂的BEV表示中提取特征。例如，MobileNetV2[158]，一种为移动应用程序设计的记忆有效CNN，在[39]、[51]中用于输出潜在轨迹及其可能性。[37]中通过一种新的快速CNN架构解决了弱势道路使用者（VRU）的轨迹预测问题，该架构利用了上下文光栅化技术[51]。在[147]中，使用车辆状态和光栅图像来构建一组潜在的未来轨迹，并通过检查语义属性来选择概率最高的轨迹作为未来轨迹。[130]中提出了一种新的快速CNN架构，用于弱势道路使用者的轨迹预测，其中使用记忆增强神经网络（MANN）生成多模式轨迹。
  - 最近的研究还提出了使用CNN预测轨迹并产生尖端结果的新技术。例如，Gilles等人[63]生成代理潜在未来的热图，而Ye等人[214]使用点云学习方法将空间和时间数据纳入轨迹预测。卓人等[226]使用ResNet-50[175]来预测车辆和行人等AV的轨迹。ResNet-50[175]可以有效地从多个维度收集信息，以产生具有三个轨迹及其置信水平的卓越预测。虽然使用CNN处理光栅图涉及显著的计算成本和信息损失，但矢量图可以用作图神经网络（GNN）中的节点，用于轨迹预测。总之，细胞神经网络在捕捉空间模式和识别轨迹数据中的空间关系方面具有优势。它们在参数共享方面是高效的，并且可以处理更大的数据集。然而，他们可能会在建模时间相关性和处理可变长度序列方面遇到困难。表14总结了基于CNN的轨迹预测方法，包括以秒为单位测量的预测范围和预测的轨迹数量。该表还概述了用于培训和测试的评估指标，并强调了每项研究的优势和劣势。此外，表15评估输入模态，观察长度，比较基于CNN的方法的编码和解码技术，并根据损失函数、优化方法、激活函数/学习率和训练平台等因素区分方法。此外，它还提供了训练、验证和测试数据集中每种方法的样本计数。以下各节将介绍基于GNN预测车辆轨迹的方法。
- GNN
  - 当考虑将交互相关因素考虑在内的预测技术时，环境的每个元素都可以被视为图中的一个节点。然而，许多现实世界的应用程序从非欧几里得空间生成数据，而传统的基于深度学习的分析欧几里得空间数据的方法在这种情况下表现不佳。每个场景都可以表示为具有可变大小无序节点的不规则图，并且由于附近节点数量的变化，一些关键操作（如卷积）不直接适用于图。尽管如此，图中的每个节点都通过边连接到其他节点，这可以用来确定各种对象的相互依赖性。图神经网络（GNN）非常适合于基于交互相关元素的车辆轨迹预测挑战[197]。方法如图11所示。Diehl等人[47]支持了这一观点，他们使用两个众所周知的图网络证明了轨迹预测的有效性：图卷积网络（GCN）和图注意力网络（GAT）。除了评估输入模态和观察长度（以秒为单位）外，表16还比较了基于图神经网络的方法（如GCN、GAT和其他方法）的编码和解码过程。它根据优化方法、损失函数、激活函数/学习率、训练参数和训练平台来区分方法。此外，它还提供了训练、验证和测试数据集中每种方法的样本数
  - Graph convolutional network, GCN
    - 图卷积网络（GCN）是图神经网络领域中一种流行的技术。它将卷积运算从传统的图像数据处理扩展到了图形数据处理。关键思想是创建一个映射函数，该函数可以从网络中的节点特征及其相邻节点中提取感知交互的特征。李等人[120]提出了GRIP，这是一种基于图卷积网络的轨迹预测模型，通过在每个采样时间将车辆视为网络内的节点来考虑交互相关因素。GRIP使用固定图网络来描述交通参与者之间的交互相关特征，并使用LSTM编码器-解码器来使用GCN的输出预测附近车辆的轨迹。为了提高GRIP的准确性，李等人[119]提出了GRIP++，该算法同时使用固定和动态图网络，并于2019年底在百度Apolloscape数据集[91]中排名第一。Jeon等人[95]提出了SCALE Net，它可以预测附近任意数量车辆的轨迹，同时通过使用边缘增强图卷积网络（EGCN）[66]来学习交通流中的边缘特征来保持性能。Chandra等人[26]提出了一种双层GNN-LSTM结构来解决轨迹预测问题，方法是在第一层使用LSTM编码器-解码器来预测交通参与者的未来轨迹，在第二层使用加权动态几何图网络来表示交通参与者的交互相关特征。赵等人[231]提出了一种基于频谱的GCN网络，该网络允许场景中的所有车辆通信信息，以考虑周围车辆如何变化和适应环境。Sheng等人[164]提出了GSTCN网络，该网络使用GCN来处理空间交互，使用CNN来捕获时间数据，并使用门控递归单元网络来加密和解密时空属性，以产生未来的轨迹分布。徐等人[208]提出了一种具有全局时空图的群组车辆轨迹预测模型，该模型可以深入分析先前车辆轨迹之间的时间和地理关联。Dongwei等人[209]提出了MVHGN预测，这是一种基于图神经网络的模型，用于预测异构流量代理的未来路径，该模型通过融合各种逻辑相关性和图卷积模块导出的多视图逻辑特性，采用多视图逻辑网络。总之，GCN通过显式地建模对象之间的空间相关性和关系，为轨迹预测提供了一种很有前途的方法。它们可以有效地捕捉上下文信息并处理不规则的图形结构。然而，在将GCN应用于轨迹预测任务时，应仔细考虑可扩展性、图构建和时间依赖性建模。表17提供了基于GCN的轨迹预测方法的概述，包括以秒为单位测量的预测范围和预测的轨迹数量，以及用于训练和测试的评估指标。该表还强调了每项研究的优势和劣势。
  - Graph attention network, GAN
    - 从单跳邻域收集数据的方法在图注意力网络（GAT）和GCN之间变化很大，GAT使用注意力机制代替静态归一化卷积过程。Velickovic等人[241]提出了GAT。在[139]中，编码器-解码器设计与GAT一起用于从由汽车和局部道路地图顶点组成的异构有向图中提取空间交互信息。在[50]中引入了排斥和吸引图注意力（RAGAT）模型，该模型使用两个堆叠的GAT来基于自由空间和车辆状态信息预测轨迹。在[138]中，开发了一个具有异构边缘增强图注意力网络的三通道系统，以解决场景中车辆的异构性。使用有向边缘特征的异构图来表示流量中的代理间交互，并添加了门机制来实现目标代理之间的选择性地图共享。刘等人[126]提出了一种使用图注意力同构网络（GAIN）的多智能体、多模态轨迹预测框架，该框架由三个注意力块组成。在[221]中引入了AI-TP，以使用GAT来预测多个SV轨迹作为交互信息，然后是两个卷积门控递归单元（GRU）网络。张等人在[220]中提出了Gatformer模型，用于预测附近交通代理的未来移动，同时考虑时空连接，使用图和GAT来捕捉环境交互，并集成转换器编码器-解码器。在[131]中，两层GAT用于信息聚合和节点相关性解释，具有多头注意力机制，将周围状态投影到图中，并解释车辆和交通流状态之间的相互作用。总之，GAT使模型能够关注图中的相关节点（例如，车辆、行人），分配不同的权重来捕捉每个节点的特征对预测特定对象轨迹的重要性。然而，GAT的性能在很大程度上取决于图结构的质量和表示。设计适当的图表示并考虑节点和边的选择对于获得最佳结果至关重要。表18总结了基于GAN的轨迹预测方法，强调了预测的轨迹数量和以秒为单位测量的预测范围。该表还提供了对每项研究的优势和劣势的见解，以及用于培训和测试的评估指标。
  - Other graph neural network
    - 高清地图在自动驾驶汽车的轨迹预测中起着至关重要的作用。高清地图提供了有关道路网络的详细信息，包括车道标记、交通信号和道路边界，这有助于更准确地预测车辆或行人的未来轨迹。最初，Benz等人[236]使用高清地图预测轨迹，然后根据地图拓扑结构使用相关车道信息确定车辆沿车道的未来轨迹。然而，这种方法没有考虑相互作用相关的因素。为了提高轨迹预测的准确性，在引入了带有矢量地图的Argoverse数据集[27]之后，研究人员将GNN纳入其中，以捕捉车辆与地图以及车辆之间的交互特征。Gao等人[58]提出了VectorNet，这是一种基于GNN的系统，它使用节点来表示场景中的矢量地图和车辆，用于轨迹预测。梁等人[121]集成了CNN提取的车辆特征和GCN从矢量图中提取的车道特征，用于轨迹预测。赵等人[227]提出了一种称为目标驱动轨迹预测（TNT）的目标驱动方法，该方法使用矢量网提取的地图特征选择稀疏目标锚和到达目标的最佳路线。DenseTNT[69]通过评估密集的候选目标，在性能上优于TNT。曾等人[217]利用LaneRCNN来表示局部车道图和交互模块，以说明参与者的历史轨迹和局部地图拓扑之间的交互因素。研究人员正在探索整合多种信息来源的方法，包括高清地图、传感器数据和机器学习算法，以提高自动驾驶汽车轨迹预测的准确性和稳健性。表19提供了用于轨迹预测的其他基于图神经网络的方法的摘要，重点是预测的轨迹数量和以秒为单位测量的预测范围。该表还提供了每项研究的优势和劣势，以及用于培训和测试的评估指标。


- 基于模型的方法
  - 基于模型的[48]-[50]方法包含定量结果。基于模型的风险评估方法包括数学模型，如基于风险场理论[50]的风险排斥或用于避免碰撞的车辆位置和轮胎滑移角[48]。这些数学模型提供了一个风险指标来帮助RA。
  - 除了对车辆和场景进行建模外，[48]等工作还探索了横向和纵向AV控制的建模，特别是开发过程中的道路路径和车辆运动轨迹。该方法包括使用（1）车辆建模，（2）道路几何建模，以及最终使用（3）优化和控制算法来实现车道保持，以实现安全操纵和防撞解决方案。因此，该方法侧重于开发过程中开发的车道保持和防撞场景。这是通过使用数字成本函数来表示RA来实现的。
  - 在另一项研究[50]中，使用场论[73]来评估纵向风险因素。使用这种方法，获得了碰撞预防的定量风险数字（在车辆对车辆的情况下）。本文介绍了一个独特的术语，称为“风险排斥”。风险排斥据说与碰撞时间成反比。数值是用指数项建模的，当后车行驶速度比前车快，两辆车之间的空间减少时，数值会变大（最大值=1.0）。
  - 最近的一项工作[33]使用预测风险数来进行风险评估，使用AV控制标签和环境风险标签来确定AV面临的风险值。该框架侧重于AV速度、转向和制动控制，并将严重程度分类、环境风险标签和距离作为PRN的模型。由于该框架随着时间的推移在特定位置重复实时运行，因此可以获得PRN的过去数据，以确定（在导航和控制过程中） AV在到达指定位置之前是否会面临这种风险。
  - 危险事件：该方法侧重于碰撞和AV的可控性的风险评估。
  - 可控性：AV速度、转向和制动控制
  - 预测风险数：严重程度分类、环境风险标签和距离
  - 本方法通过实时捕捉潜在危险事件，并将其与过去发生的事件进行比较，以预测未来的安全行动。
  - 
  - 用于自动驾驶汽车（AV）开发和验证的现有风险评估（RA）方法不足以用于未来的AV操作。现有框架基于危害分析和风险评估（HARA）等过程运行，其中风险是基于功能性危险事件的严重性和发生的可能性来定义的。这是一个在开发阶段执行的静态过程，依赖于先前的经验教训和专业知识。这样做的一个缺点是忽略了实时过程中可能发生的潜在复杂环境，尤其是在更高自动化水平下运行的AV的安全要求更严格的情况下。因此，需要一个额外的框架来进一步提高AV的安全水平，在开发过程中注重实时而非静态的风险评估。在本文中，一种新的实时递归RA框架（ReRAF）通过在时间和空间域中创建新的风险表示、预测风险数（PRN）和最终安全级别（SL）来解决这一差距。该方法侧重于基于AV与检测到的危险物体的碰撞和AV的可控性的风险评估。动态递归RA连续实时捕捉潜在危险事件，并将其与过去发生的事件进行比较，以预测未来的安全行动。ReRAF提供了对RA的持续改进，并作为AV操作的额外安全层。

- 基于概率的方法
  - 当仅对RA使用概率方法[54]-[57]时，其结果只能是定量的，因此很可能焦点处于低水平（成分水平）。主要区别在于检测碰撞风险[54]、[55]或由于遮挡引起的碰撞[56]、[57]的方法。在高级别（系统级）考虑因素下，RA没有定性方法。
  - 概率作为统计学的一种形式，可分为两种主要方法：贝叶斯学派或频率学派[76]。这两种方法也可以用作执行AV或ADS RA的概率方法，最近的一些工作包括[54]-[56]和[57]的研究。
  - 在[54]和[55]中，使用车辆运动和碰撞时间作为参考，说明了概率碰撞风险的使用。Katrakazas等人[54]提出将动态贝叶斯网络方法用于运动预测和RA，提出这种方法是因为如果AV要预测实时应用的所有未来轨迹，这是一个棘手的过程。因此，他们建议使用DBN的交互感知模型进行RA和道路交互。Katrakazas等人[54]专注于车辆层面和网络层面的碰撞风险。网络级别是指AV行驶路段的安全环境，考虑到安全交通和易发生碰撞的条件。网络级冲突的方法得到了基本人工智能分类器的支持，如k近邻或高斯过程。
  - [55]使用了车辆和环境物体之间碰撞风险的概率。这是通过将场景划分为单元来实现的，并且当在车辆运动和识别对象的未来预测中网格重叠时，会发生碰撞风险。这些单元将环境表示为基于网格的系统，称为条件蒙特卡洛密集占用跟踪器（CMCDOT）[78]。
  - 除了碰撞风险的可能性外，场景内的遮挡也可能导致风险或事故。[56]和[57]的工作采用了这种方法。遮挡决定了由于在正常视野中遮挡的对象而发生碰撞的可能性。在这两项研究中，必须提供精确的或交叉点地图作为基线要求。这种风险评估方法也可以在交通宏观层面进行分类，而不是从单一的AV角度进行分类。特别是，[56]使用概率RA来证明由于传感器对看不见的区域的限制而导致的物体遮挡是合理的（例如，雷达只看到移动物体B前方的物体a，从而阻碍雷达检测，如果物体B决定向雷达移动，这可能会成为高碰撞风险）。这种风险覆盖了笛卡尔空间，代表了一种对城市交叉口的观测区域和未观测区域都有效的算法。此风险可用于路线规划或控制，以防止碰撞。
  - [57]使用基于概率的技术来识别被遮挡车辆进入具有边界表示的数学定义的被遮挡区域的最高可能性。然后基于新兴车辆进入感兴趣边界进入AV视线的速度概率来定义概率碰撞风险估计。如前所述，这两种方法[56]和[57]依赖于地图信息和适当道路信息的可用性。确定被遮挡车辆的实时过程以及随后的碰撞风险是可能的，但对于每个场景来说计算密集。[57]在三种不同场景中进行的实验也为上述方法提供了更好的可信度。

- 基于概率和模型的方法论
  - [51]的方法将定性作为关键的驱动重点，并通过使用概率技术从高层（系统）方法的角度满足ISO26262和SOTIF的要求，进一步实现定量方面。类似地，在[52]中，对场景进行了建模，并使用概率函数提供定量数据。最后，[53]描述了传感器融合技术的具体重点，通过使用交通风险评估来改进风险管理。
  - 基于概率和模型的风险评估方法通常由定性和定量结果的混合组成。本节比较了使用基于模型和概率的方法进行风险评估的不同技术。
  - 在[51]中，除了使用ADS建模识别的场景外，还计算了环境条件引发的危险事件的严重性和发生概率。该方法包括与分类的危险场景相关的潜在严重性评级的概率分布，以及场景中危险事件发生的概率分割。最后一步与ASIL的概念相关，其中每个评级都有最大概率。这种方法通过引入环境建模和条件的概率分配，围绕HARA过程进行改进。
  - 我们提出了一种自动驾驶系统安全评估的综合方法，该方法涵盖了功能安全性和预期功能的安全性（SOTIF），包括危险场景的识别和量化。所提出的方法使用并结合了已建立的探索和分析工具，用于汽车领域的危险分析和风险评估，同时增加了重要的增强功能，使其适用于自动驾驶安全分析的未知领域。
  - 除了适应HARA改进外，[52]基于损坏概率来进行风险评估。这种损坏的概率取决于碰撞的概率。碰撞的概率基于所选择的场景，同时考虑AV的指定行为。该方法还使用基于模型的UML类图来可视化正在研究的场景的所有描述可能性的分层场景描述语言（形成定性方面）。这种方法的区别在于自适应风险分析的详细参与，该分析根据碰撞概率考虑动态场景。
  - 就风险评估而言，也有不同的方法来量化环境风险。其中之一由[53]证明，使用基于模型的等效物，重点关注交通安全领域概念[74]。基于真实情况，利用碰撞物体动能的关系来近似风险水平，从而对交通RA进行策划。动能最终转化为等效力来描述交通风险。他们仍在改进风险指数模型，并建议将相对驾驶安全指数作为不同场景的参考。DSI是用于访问与安全相关的驾驶员行为的参考[75]。这一主题本身形成了人类对AV操作行为领域的另一个兴趣，这不在本文的范围内。该方法[53]还侧重于使用基于Dempster-Shafer理论（DST）概率/证据理论的检测水平来跟踪雷达集群或视觉目标物体遮挡情况下的多个不确定性。这是实现多对象感知所必需的。