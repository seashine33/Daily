# 自动驾驶风险评估方法综述
## 摘要
近年来，**自动驾驶系统**（ADS）一直是人们关注的主题，它逐渐成为主要的交通干扰因素之一，并因城市化而成为城市部署的潜在候选系统。ADS是**自动驾驶汽车**（AV）中实现自动化的系统。实现自动驾驶汽车的不同ADS技术已经达到了一定的成熟度，不再关注技术部署，而是关注公共道路上的安全部署。然而，与传统车辆相比，验证功能安全和**风险评估**（RA）的现有标准可能不足以解决ADS日益复杂的问题。这种对ADS安全性的需求随着AV自动化水平的提高而呈指数级增长。ADS暴露在不同的环境条件下，因此在试图模仿人类驾驶员的反应时会面临操作风险。此外，最近人工智能和机器学习在行业中的应用进一步塑造了ADS未来的发展方向。本文解释了RA覆盖对AV的重要性，并对现有的RA方法进行了比较和总结。此后，RA建议AV作为满足ISO 26262和ISO/PAS 21448标准的潜在解决方案。

## 1 介绍
**美国汽车工程师协会**(Society of Automotive Engineers, SAE)  

[一文详解自动驾驶的动态驾驶任务（DDT）](https://zhuanlan.zhihu.com/p/529869244)

• 重点关注提高RA意识的必要性，以应对更高SAE级别的AV**动态驾驶任务**(DDT)回退，同时解释RA的关键目标，以满足ISO 26262和ISO/PAS 21448标准。  
• 利用现有研究和方法，将AV的RA覆盖范围定义为开发和实时操作。  
• 从定性和/或定量方法与独特方法的角度对不同RA方法进行比较分析。  
• 对RA中决定论和不确定性在不同方法中对AV的重要性的深入解释。  
• 建议不同的RA方法，无论是系统级还是组件级，以满足ISO 26262标准，以及它们是否也有助于ISO/PAS 21448标准。

本调查文件组织如下。  
第二节概述了AV的汽车标准。  
第三节解释了RA覆盖的重要性。  
第四节，1）不同RA方法的详细总结，2）每种方法中不同技术的比较。  
第五节解释了决定论和不确定性在RA中的重要性。  
第六节解释了符合ISO 26262和ISO/P AS21448要求的RA方法的建议。  
第七节总结了调查文件。

## 2 自动驾驶汽车标准
**预期功能的安全性**(Safety Of The Intended Function, SOTIF)

ADS控制着AV的DDT和DDT fallback 。如表I所示，DDT fallback 属于SAE 4级和5级ADS的责任范围。当车辆系统发生故障，或在没有任何解决方案的情况下检测到危险事件时，会发生DDT回退。因此，ADS进入DDT回退状态，并在最小风险条件下运行。最小风险条件通常是指在安全优先的情况下，运行性能降低。这意味着AV可以低速运行，同时监测环境风险和车辆健康状况。如图4所示，在ADS的正常操作中，ADS内的DDT通过注明其目的地和即将到来的航路点计划来进行指导。该信息进一步与**对象和事件检测响应**（OEDR）融合，以实现车辆运动控制。横向和纵向运动控制最终决定了AV运动.

因此，OEDR、横向和纵向运动的重要性表明了DDT的重要性。由于OEDR是实时发生的，因此必须仔细绘制车辆的相应控制运动。如果OEDR没有映射到运动方面的任何规定响应，ADS将进入DDT回退模式。在这种模式下，AV将以最小的风险条件传播。为了在最小风险条件下运行，ADS需要依赖于对环境中存在的风险的实时检测或识别。

因此，为了使用RA实现安全的AV操作，在开发和实时操作期间，由于动态环境变化，识别AV的RA覆盖范围至关重要。除此之外，识别风险的方法也有所不同。下一节将解释RA如何在不同的覆盖范围和AV方法中表现出来

- [ ] 这里有好一些流程图。

## 3 自动驾驶汽车(AV)风险评估(RA)覆盖范围
RA的目的是使用OEDR识别危险事件的严重性，并确定缓解控制措施（以下称为安全措施），以防止该事件发生或通过DDT减少其发生。危险事件风险的识别可以源于内部原因（车辆级别）和/或外部原因（环境级别）[28]。内部原因与故障、故障和故障有关，而外部原因可能是由于车辆和环境条件或无意的误用。因此，为了确保RA的充分覆盖，需要开发和实时RA来满足ISO 26262和ISO/PAS 21448。ISO 26262侧重于内部原因，而ISO/PAS 21448侧重于环境原因。

![图五](/note/img/屏幕截图%202023-11-30%20173742.png)

图5简要概述了AV的RA覆盖范围，其中应包括产品开发（a）和实时操作（B），以及实时操作期间仍可能发生的新危险事件（未知安全或不安全）（C），即使进行了模拟、试验测试和场景测试。本文中的RA覆盖范围集中在高自动化级别4和5，因为安全要求对ADS至关重要，ADS根本不依赖于人类驾驶员。

参考图5，RA是在开发过程中创建和规划的（A），并应用于实时操作（1）。然而，在真实世界的部署（B）中，不可能在开发（A）期间考虑所有可能的场景。因此，当新的危险事件（C）的检测（2）本应在DDT回退模式下作出反应时，可能会导致不可预测的AV动作。在目前的实施中，这些新的危险事件被记录下来，它们需要另一个正在维护的开发周期（3）来更新和升级其新的安全措施（如果未知不安全）。这反映了每一个新的危险事件（C）的潜在暴露风险，在开发过程中没有考虑到这一点。尽管有针对不同场景的AV试验和模拟，但当AV发生计划外的新危险事件时，DDT fallback 决策（4）仍存在潜在差距。因此，近年来也提出了实时覆盖[31]-[34]。为了弥补（4）这一差距，需要实时RA来确定DDT fallback的必要行动，而无需等待重新开发循环（3），而是实时评估和处理安全操作的风险（1），这可以帮助满足SOTIF的要求。这可以通过对检测到的每一个新的危险事件使用安全措施的预先映射来实现（4）。此外，确定AV的RA的方法包括1）车辆级方法（检测车辆内部风险原因）[35]，2）环境级方法（识别车辆和环境风险原因）[36]。在第四节中，RA使用的每种方法都进一步解释了方法的差异。因此，为了实现对AV RA的完整覆盖，需要在产品开发过程中以及实时操作中开发RA。在RA中，风险识别的准确性和安全措施的制定也必须使用不同的方法进行识别。

### A AV开发过程中的风险评估
危害分析和风险评估(Hazard Analysis and Risk Assessment, HARA)[37]
FMEA[38]
### B AV实时运行过程中的风险评估

## 4 自动驾驶汽车的风险评估方法
本节比较了AVs使用和研究的不同RA方法。表III显示了现有的RA方法，这些方法分为过程、建模、概率、人工智能或基于合作的RA，如果该方法由车辆和/或环境级别的方法组成，则将其统称。此外，其中一些方法可用于开发和实时RA。**车辆级方法**是指使用AV或车辆的功能基础识别危险事件，并确定故障可能性的风险。**环境层面的方法**是指以与AV碰撞的风险为主要动机，从环境中触发检测到的危险事件。如果RA的定义同时包含**定性和定量**两个方面，则它被确定为更具结论性。然而，如果引入定量涉及不确定性，则应予以解决。这些**确定性和不确定性**的主题将在后面的章节中讨论，以及这些RA方法对现有监管需求的可用性。

如表III所示，过程驱动方法[31]、[32]、[35]-[37]、[44]-[47]倾向于定性而非定量，但[32]除外，在[32]中，它使用事件频率和针对上下文内容的数字分类，并与其相应的安全目标相匹配。这是在保持HARA进程完整的情况下完成的。另一个观察结果表明，除[31]、[44]和[32]外，大多数过程驱动方法都被认为是静态的（在开发过程中定义）。在[32]中，提出了HARA的实时更新，而在[31]中，实现了实时ASIL确定。基于过程的RA方法论从更高层次（系统）的角度基于上下文描述执行RA。他们倾向于从车辆级别开始识别功能中的故障或失灵，并将其扩展到环境情况。

基于模型的[48]-[50]方法包含定量结果，而基于过程的方法更倾向于定性结果。基于模型的方法RA包括数学模型，如基于风险场理论[50]的风险排斥或用于避免碰撞的车辆位置和轮胎滑移角[48]。这些数学模型提供了一个风险指标来帮助RA。在[49]中，统一建模语言（UML）的建模用于自动化HARA过程，这有助于ISO 26262，在这种情况下，它只有定性结果。

在RA中使用概率和模型[51]-[53]方法提供了定性和定量结果。[51]的方法将定性作为关键的驱动重点，并通过使用概率技术从高层（系统）方法的角度满足ISO26262和SOTIF的要求，进一步实现定量方面。类似地，在[52]中，对场景进行了建模，并使用概率函数提供定量数据。最后，[53]描述了传感器融合技术的具体重点，通过使用交通风险评估来改进风险管理。

相反，当仅对RA使用概率方法[54]-[57]时，其结果只能是定量的，因此很可能焦点处于低水平（成分水平）。主要区别在于检测碰撞风险[54]、[55]或由于遮挡引起的碰撞[56]、[57]的方法。在高级别（系统级）考虑因素下，RA没有定性方法。

就基于人工智能的RA方法而言，由于担心人工智能是否适合安全关键系统设计，参考文献较少。很明显，人工智能用于AV和ADS的决策和预测[67]。然而，人工智能治疗RA的实例尚未得到广泛研究。

最后，协作模式RA方法是一种独立的方法，侧重于车辆到车辆（V2V）或车辆到基础设施（V2X）的可用数据。结果也可以存在于车辆或基础设施中。不同技术的比较包括基于模型的[61]、基于概率和模型的[62]-[64]、基于人工智能的[65]和基于唯一模糊风险的[66]。其中，[62]和[66]具有定性和定量结果。

### A 基于过程的方法
HARA和FMEA都被认为是基于过程的方法，在开发过程中使用车辆级方法。如果目的是获得更精确的故障识别，那么[46]和[45]等工作说明了在HARA中使用迭代细化过程来提供更详细的尺寸和危险事件描述。这提供了一个更简洁的安全目标，作为AV的缓解措施。与[35]的工作相比，使用熟练的图形场景来表示潜在危险事件与无人驾驶车辆操作的关系。这提供了根据危险关系对场景的完整描述，而不是使用迭代循环。除了使用熟练的图形和场景来确定危险事件映射的可能原因外，[36]还为危险事件添加了情境考虑因素。与[35]、[45]、[46]相比，这种方法[36]被认为更详细，但同样，[46]和[45]的迭代过程可以进一步细化场景、情况、目标和实现的值。传统的HARA和FMEA以及[46]和[45]的研究之间的最大区别在于使用场景、危险树和场景检测故障，而[35]和[36]通过定义AV操作和环境限制或障碍增加了更多的复杂性，如[44]所示。[44]和[31]中使用了这种限值监测，这与实时车辆和环境水平检测相对应，以实现实时RA（在第IIIB节中进行了解释）。此外，[32]提出了一种称为定量风险规范（QRN）的新方法，以克服HARA过程是定性的。QRN是一个数字，它取决于后果类别中事件的频率和事件类型。随后使用相应的QRN来映射相应的安全目标。不同研究基于过程的不同RA覆盖范围的比较如表IV所示。基于过程的RA方法中的一项观察表明，这些步骤纯粹是定性的，然后使用规则集来定义区域状态，以表示严重性、发生率、可控性和最终风险水平或ASIL评级。该风险等级或ASIL评级进一步用于定义创建/改进安全目标的需求。唯一的例外是[32]，其中数字被分配给危险事件的定性描述，并说明其事件频率，从而包括定量元素。

使用基于过程的风险评估方法的唯一主要缺点是缺乏风险的定量测量。这可以通过一些方法来克服，如概率和/或将风险视为定量数字的建模方法。

### B 基于模型的方法
我们想首先独立总结使用基于模型的方法来帮助简化执行HARA的研究。在[49]的工作中，通过使用故障类型引导词和一组有组织的情况来确定相关原因，将UML模型的使用扩展到HARA过程。此外，对象约束语言（OCL）验证检查用于验证错误或不一致，然后是基于表的HARA和UML模型的映射。该方法提供了一个框架，允许采用系统的方法记录和分析危险事件及其根本原因，从而提供最终清晰的故障树分析[41]。UML通常用于汽车的软件和系统开发[68]–[70]。这种危险事件建模方法及其相应的安全响应可以使用基于模型的场景[71]甚至基于模型的安全分析[72]方法进一步扩展。这些技术在最近的发展中很明显

除了对车辆和场景进行建模外，[48]等工作还探索了横向和纵向AV控制的建模，特别是开发过程中的道路路径和车辆运动轨迹。该方法包括使用（1）车辆建模，（2）道路几何建模，以及最终使用（3）优化和控制算法来实现车道保持，以实现安全操纵和防撞解决方案。因此，该方法侧重于开发过程中开发的车道保持和防撞场景。这是通过使用数字成本函数来表示RA来实现的。该成本函数是一种定性测量，其目标是优化和控制，而不是与环境因素碰撞的直接风险。

在另一项研究[50]中，使用场论[73]来评估纵向风险因素。使用这种方法，获得了碰撞预防的定量风险数字（在车辆对车辆的情况下）。本文介绍了一个独特的术语，称为“风险排斥”。风险排斥据说与碰撞时间成反比。数值是用指数项建模的，当后车行驶速度比前车快，两辆车之间的空间减少时，数值会变大（最大值=1.0）。模型中的部件考虑了前后车辆之间的速度和距离差异。在这种方法中，使用风险排斥对实时碰撞预测进行建模。

最近的一项工作[33]使用PRN作为RA的图形，使用AV控制标签和风险标签来确定AV面临的风险指示。该框架侧重于AV速度、转向和制动控制，并将严重程度分类、环境风险标签和距离作为PRN的模型。然后，PRN的水平进一步决定了安全水平和增强现有安全目标的必要性。由于该框架随着时间的推移在特定位置重复实时运行，因此可以获得PRN的过去数据，以确定（在导航和控制过程中）AV在到达指定位置之前是否会面临这种风险。利用本节中提到的基于模型的RA方法，表V总结了不同技术的比较。

### C 基于概率和模型的方法论
概率和基于模型的RA通常由定性和定量结果的混合组成。本节比较了使用模型和基于概率的方法进行RA的不同技术。

在[51]中，除了使用ADS建模识别场景外，还使用了环境条件引发的危险事件的严重性和发生概率。该方法包括与分类的危险场景相关的潜在严重性评级的概率分布，以及场景中危险事件发生的概率分割。最后一步与ASIL的概念相关，其中每个评级都有最大概率。这种方法通过引入环境建模和条件的概率分配，围绕HARA过程进行改进。这导致提供了定性和定量的结果，这为HARA的改进提供了很好的指导。这种方法可以在开发生命周期中实现，但由于概率分割分布动态变化的不同场景，实时反应可能具有挑战性。

除了适应HARA改进外，[52]还使用损坏概率来评估风险评估的背景。这种损坏的概率取决于碰撞的概率。碰撞的概率基于所选择的场景，同时考虑AV的指定行为。该方法还使用基于模型的UML类图来可视化正在研究的场景的所有描述可能性的分层场景描述语言（形成定性方面）。这种方法的区别在于自适应风险分析的详细参与，该分析根据碰撞概率考虑动态场景。相比之下，[51]更多地关注场景中发生危险事件的严重性概率。然而，不幸的是，双方都没有机会用现实的例子来说明他们的做法。

就风险评估而言，也有不同的方法来量化环境风险。其中之一由[53]证明，使用基于模型的等效物，重点关注交通安全领域概念[74]。基于真实情况，利用碰撞物体动能的关系来近似风险水平，从而对交通RA进行策划。动能最终转化为等效力来描述交通风险。他们仍在改进风险指数模型，并建议将相对驾驶安全指数作为不同场景的参考。DSI是用于访问与安全相关的驾驶员行为的参考[75]。这一主题本身形成了人类对AV操作行为领域的另一个兴趣，这不在本文的范围内。该方法[53]还侧重于使用Dempster-Shafer理论（DST）跟踪雷达集群或视觉目标物体遮挡情况下的多个不确定性。这是实现多对象感知所必需的。

表VI概述了所讨论的不同概率和基于模型的RA覆盖范围。所有这些都具有定量方面，无论是在计算车辆和环境因素方面，还是在涉及概率理论方面。就覆盖范围而言，三者在开发生命周期中都考虑了车辆和环境领域。[52]和[53]的工作强调了识别碰撞风险的重要性，将其作为除严重程度、危险事件及其发生之外的潜在指标。

就所选的三种概率和基于模型的方法而言，[51]的方法是对现有HARA过程的扩展。虽然[52]和[53]都侧重于使用碰撞风险作为另一种形式的风险指标，因此总体方法在定性内容方面不会那么全面。

### D 基于概率的方法

### E 基于人工智能的方法

### F 基于合作模型的方法

## 5 确定性(determinism)和不确定性(uncertainty)在风险评估中的重要性

## 6 RA方法论的推荐

## 7 总结
这项调查增加了对AV RA方法的了解。它介绍了RA覆盖对开发和实时操作的重要性。RA保险的正当性是由于ISO 26262和ISO/PAS 21488的要求，该要求涵盖了与内部原因（如AV故障）和外部原因（如视听环境）相关的风险。RA的关注度增加也是因为在DDT回退期间，ADS对高度自动化驾驶的安全需求增加。在驾驶员脱离回路的情况下，ADS需要意识到其周围环境，以便在DDT回退的情况下在风险最小的情况下运行。本文中对RA方法的综述分为不同的方法进行比较，并强调了它们的独特方法以及它们是定性的还是定量的。如果可以在开发或实时RA覆盖期间实施，以及车辆故障和/或触发危险环境检测事件的能力，则单独的方法也会进行分类。此外，在风险的背景下，决定论和不确定性的重要性也得到了强调。最后，如果不同的RA方法符合ISO 26262和ISO/PAS 21448的要求，则提出了建议。
